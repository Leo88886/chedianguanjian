<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.platform.dao.ApiStoreDao">

    <select id="queryByOpenId" resultType="com.platform.entity.ApiStore">
      SELECT
        T.open_id,
        T.store_name,
        T.store_location,
        T.phone,
        T.business_license_no,
        T.shopkeeper_name
       FROM nideshop_store T
      WHERE open_id = #{openId}
    </select>

    <insert id="saveOrUpdate" parameterType="com.platform.entity.ApiStore" >
		insert into nideshop_store(
			`open_id`,
			`store_name`,
			`store_location`,
			`phone`,
			`business_license_no`,
			`shopkeeper_name`)
		values(
			#{store.openId},
			#{store.storeName},
			#{store.storeLocation},
			#{store.phone},
			#{store.businessLicenseNo},
			#{store.shopkeeperName}
			)
		on duplicate key update `store_name`= values(#{store.storeName}),
		`store_location`= values(#{store.storeLocation}),`phone`= values(#{store.phone}),
		`business_license_no`= values(#{store.businessLicenseNo}),`shopkeeper_name`= values(#{store.shopkeeperName})
	</insert>

</mapper>